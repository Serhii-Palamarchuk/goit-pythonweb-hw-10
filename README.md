# Contacts API

REST API –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏, –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º FastAPI —Ç–∞ SQLAlchemy.

## –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è, —á–∏—Ç–∞–Ω–Ω—è, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ (CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó)
- –ü–æ—à—É–∫ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ –∑–∞ —ñ–º'—è–º, –ø—Ä—ñ–∑–≤–∏—â–µ–º –∞–±–æ email
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ –∑ –¥–Ω—è–º–∏ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è –Ω–∞ –Ω–∞–π–±–ª–∏–∂—á—ñ 7 –¥–Ω—ñ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
src/
‚îú‚îÄ‚îÄ database/           # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö —Ç–∞ –º–æ–¥–µ–ª—ñ
‚îÇ   ‚îú‚îÄ‚îÄ db.py          # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ models.py      # SQLAlchemy –º–æ–¥–µ–ª—ñ
‚îú‚îÄ‚îÄ repository/        # –†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –¥–∞–Ω–∏–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ contacts.py    # CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤
‚îú‚îÄ‚îÄ routes/           # API —Ä–æ—É—Ç–µ—Ä–∏
‚îÇ   ‚îî‚îÄ‚îÄ contacts.py   # –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤
‚îú‚îÄ‚îÄ schemas/          # Pydantic —Å—Ö–µ–º–∏ –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
‚îÇ   ‚îî‚îÄ‚îÄ contacts.py   # –°—Ö–µ–º–∏ –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤
‚îú‚îÄ‚îÄ exceptions.py     # –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
‚îî‚îÄ‚îÄ config.py         # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–æ–¥–∞—Ç–∫–∞
tests/                # –¢–µ—Å—Ç–∏
‚îú‚îÄ‚îÄ test_full_api.py  # –ü–æ–≤–Ω–∏–π —Ç–µ—Å—Ç API
‚îú‚îÄ‚îÄ test_error_handling.py # –¢–µ—Å—Ç –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫
‚îú‚îÄ‚îÄ simple_test.py    # –ü—Ä–æ—Å—Ç–∏–π —Ç–µ—Å—Ç
‚îî‚îÄ‚îÄ README.md         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Ç–µ—Å—Ç—ñ–≤
main.py               # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –¥–æ–¥–∞—Ç–∫–∞
pyproject.toml        # Poetry –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ç–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
.env.example          # –ü—Ä–∏–∫–ª–∞–¥ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
```

## Poetry –∫–æ–º–∞–Ω–¥–∏

### –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–∞–Ω–¥–∏
```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
poetry install

# –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—É –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å
poetry add package_name

# –î–æ–¥–∞—Ç–∏ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏
poetry add --group dev package_name

# –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ
poetry shell

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É —É –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ
poetry run command

# –ü–æ–∫–∞–∑–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø—Ä–æ–µ–∫—Ç
poetry show

# –û–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
poetry update
```

### –°–∫—Ä–∏–ø—Ç–∏ –ø—Ä–æ–µ–∫—Ç—É
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä
poetry run uvicorn main:app --reload

# –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –∫–æ–¥—É
poetry run black src/

# –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è —ñ–º–ø–æ—Ä—Ç—ñ–≤
poetry run isort src/

# –õ—ñ–Ω—Ç–∏–Ω–≥
poetry run flake8 src/

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤
# –ë–∞–∑–æ–≤–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ (–±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞ —ñ –ë–î)
poetry run python tests/test_basic.py

# –û—Å–Ω–æ–≤–Ω—ñ —Ç–µ—Å—Ç–∏ –∑ —Ä–µ–∞–ª—å–Ω–æ—é –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö (–ø–æ—Ç—Ä–µ–±—É—î –∑–∞–ø—É—â–µ–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
poetry run python tests/test_full_api.py
poetry run python tests/test_error_handling.py

# –¢–µ—Å—Ç–∏ –∑ TestClient (–±–µ–∑ –ø–æ—Ç—Ä–µ–±–∏ –≤ —Å–µ—Ä–≤–µ—Ä—ñ)
poetry run python tests/test_with_client.py

# –ü—Ä–æ—Å—Ç–∏–π —Ç–µ—Å—Ç
poetry run python tests/simple_test.py

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —è–∫–æ—Å—Ç—ñ –∫–æ–¥—É (–≤–µ—Å—å pipeline)
poetry run black src/ && poetry run isort src/ && poetry run flake8 src/ --max-line-length=88
```

## –†–æ–∑—Ä–æ–±–∫–∞

### –ü–µ—Ä–µ–¥ –∫–æ–º—ñ—Ç–æ–º
–†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –∑–∞–ø—É—Å–∫–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —è–∫–æ—Å—Ç—ñ –∫–æ–¥—É:
```bash
# –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
poetry run black src/
poetry run isort src/
poetry run flake8 src/ --max-line-length=88
```

### –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ Poetry
```bash
# –ü–æ–∫–∞–∑–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø—Ä–æ–µ–∫—Ç
poetry show

# –ü–æ–∫–∞–∑–∞—Ç–∏ –¥–µ—Ä–µ–≤–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π  
poetry show --tree

# –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—É –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å
poetry add package-name

# –î–æ–¥–∞—Ç–∏ dev –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å
poetry add --group dev package-name

# –ï–∫—Å–ø–æ—Ä—Ç –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —É requirements.txt (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
poetry export -f requirements.txt --output requirements.txt
```

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏
- Python 3.8+
- PostgreSQL
- Poetry (–¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏)

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Poetry (—è–∫—â–æ —â–µ –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)
```bash
# Windows (PowerShell)
(Invoke-WebRequest -Uri https://install.python-poetry.org -UseBasicParsing).Content | python -

# Linux/Mac
curl -sSL https://install.python-poetry.org | python3 -
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É

1. –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:
```bash
git clone https://github.com/YOUR_USERNAME/goit-pythonweb-hw-08.git
cd goit-pythonweb-hw-08
```

2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —á–µ—Ä–µ–∑ Poetry:
```bash
poetry install
```

3. –ê–∫—Ç–∏–≤—É–π—Ç–µ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ Poetry:
```bash
poetry shell
```

4. –ó–∞–ø—É—Å—Ç—ñ—Ç—å PostgreSQL –±–∞–∑—É –¥–∞–Ω–∏—Ö —á–µ—Ä–µ–∑ Docker:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ PostgreSQL –≤ Docker (–ø–æ—Ç—Ä—ñ–±–µ–Ω Docker)
docker-compose up -d

# –ê–±–æ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å PostgreSQL –ª–æ–∫–∞–ª—å–Ω–æ —ñ —Å—Ç–≤–æ—Ä—ñ—Ç—å:
# - –±–∞–∑—É –¥–∞–Ω–∏—Ö: contacts_db
# - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞: user –∑ –ø–∞—Ä–æ–ª–µ–º: password
```

5. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:
```bash
cp .env.example .env
# –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ .env —Ñ–∞–π–ª –∑ –≤–∞—à–∏–º–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏ –ë–î
```

6. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –¥–æ–¥–∞—Ç–æ–∫:
```bash
# –ß–µ—Ä–µ–∑ Poetry
poetry run uvicorn main:app --reload
```

–î–æ–¥–∞—Ç–æ–∫ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é: http://127.0.0.1:8000

**–®–≤–∏–¥–∫—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è:**
- API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (Swagger): http://127.0.0.1:8000/docs
- API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (ReDoc): http://127.0.0.1:8000/redoc
- OpenAPI JSON (–¥–ª—è Postman): http://127.0.0.1:8000/openapi.json

## API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

**Swagger UI**: http://127.0.0.1:8000/docs
**ReDoc**: http://127.0.0.1:8000/redoc

**–†—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ Swagger UI —Ç–∞ ReDoc:**
- **Swagger UI** - —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è API –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ
- **ReDoc** - –∫—Ä–∞—Å–∏–≤–∞, –∑—Ä—É—á–Ω–∞ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –∑ –∫—Ä–∞—â–∏–º –¥–∏–∑–∞–π–Ω–æ–º

### Postman –∫–æ–ª–µ–∫—Ü—ñ—è

–î–ª—è —ñ–º–ø–æ—Ä—Ç—É API –≤ Postman –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ OpenAPI JSON —Å—Ö–µ–º—É:

**JSON Schema URL**: `http://127.0.0.1:8000/openapi.json`

**–Ø–∫ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –≤ Postman:**
1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä: `poetry run uvicorn main:app --host 127.0.0.1 --port 8000`
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Postman
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Import" ‚Üí "Link"
4. –í—Å—Ç–∞–≤—Ç–µ URL: `http://127.0.0.1:8000/openapi.json`
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Continue" ‚Üí "Import"

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ, –º–æ–∂–µ—Ç–µ —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ JSON —Å—Ö–µ–º—É –∑ –±—Ä–∞—É–∑–µ—Ä–∞:
- –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ `http://127.0.0.1:8000/openapi.json`
- –°–∫–æ–ø—ñ—é–π—Ç–µ –≤–µ—Å—å JSON
- –£ Postman: "Import" ‚Üí "Raw text" ‚Üí –≤—Å—Ç–∞–≤—Ç–µ JSON

üìã **–î–µ—Ç–∞–ª—å–Ω–∏–π –≥—ñ–¥ –ø–æ Postman**: [postman-guide.md](postman-guide.md)

## –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏

### –ö–æ–Ω—Ç–∞–∫—Ç–∏

- `POST /api/contacts/` - –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –∫–æ–Ω—Ç–∞–∫—Ç
- `GET /api/contacts/` - –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ (–∑ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é —Ç–∞ –ø–æ—à—É–∫–æ–º)
- `GET /api/contacts/{contact_id}` - –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–Ω—Ç–∞–∫—Ç –∑–∞ ID
- `PUT /api/contacts/{contact_id}` - –û–Ω–æ–≤–∏—Ç–∏ –∫–æ–Ω—Ç–∞–∫—Ç
- `DELETE /api/contacts/{contact_id}` - –í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ–Ω—Ç–∞–∫—Ç
- `GET /api/contacts/birthdays` - –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∏ –∑ –¥–Ω—è–º–∏ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω—ñ 7 –¥–Ω—ñ–≤

### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø–æ—à—É–∫—É

- `search` - –ü–æ—à—É–∫ –∑–∞ —ñ–º'—è–º, –ø—Ä—ñ–∑–≤–∏—â–µ–º –∞–±–æ email
- `skip` - –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ N –∑–∞–ø–∏—Å—ñ–≤ (–¥–ª—è –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó)
- `limit` - –û–±–º–µ–∂–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Å—ñ–≤ (max 100)

## –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç—É

```bash
curl -X POST "http://127.0.0.1:8000/api/contacts/" \
-H "Content-Type: application/json" \
-d '{
  "first_name": "–Ü–≤–∞–Ω",
  "last_name": "–ü–µ—Ç—Ä–µ–Ω–∫–æ",
  "email": "ivan@example.com",
  "phone_number": "+380501234567",
  "birth_date": "1990-05-15",
  "additional_data": "–î—Ä—É–≥ –∑ —É–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç—É"
}'
```

### –ü–æ—à—É–∫ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤

```bash
curl "http://127.0.0.1:8000/api/contacts/?search=—ñ–≤–∞–Ω"
```

### –î–Ω—ñ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è

```bash
curl "http://127.0.0.1:8000/api/contacts/birthdays"
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **FastAPI** - –í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **SQLAlchemy** - ORM –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
- **PostgreSQL** - –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **Pydantic** - –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
- **Uvicorn** - ASGI —Å–µ—Ä–≤–µ—Ä
- **Poetry** - –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏ —Ç–∞ –ø–∞–∫–µ—Ç–∞–º–∏
- **Black** - –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –∫–æ–¥—É
- **isort** - –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è —ñ–º–ø–æ—Ä—Ç—ñ–≤
- **flake8** - –õ—ñ–Ω—Ç–∏–Ω–≥ –∫–æ–¥—É

## –ê–≤—Ç–æ—Ä
Serhii Palamarchuk

–°—Ç–≤–æ—Ä–µ–Ω–æ –≤ —Ä–∞–º–∫–∞—Ö –¥–æ–º–∞—à–Ω—å–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è GoIT Python Web Development
